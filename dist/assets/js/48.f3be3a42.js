(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{204:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"项目优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目优化"}},[t._v("#")]),t._v(" 项目优化")]),t._v(" "),a("h3",{attrs:{id:"小程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序"}},[t._v("#")]),t._v(" 小程序")]),t._v(" "),a("h4",{attrs:{id:"分包处理、分包预加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分包处理、分包预加载"}},[t._v("#")]),t._v(" 分包处理、分包预加载")]),t._v(" "),a("p",[t._v("https://www.pianshen.com/article/69841665695/")]),t._v(" "),a("p",[t._v("https://www.cnblogs.com/whenwei123/p/14134517.html")]),t._v(" "),a("p",[t._v("app.json")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pages"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//主包")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pages/index"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pages/logs"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"subpackages"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//分包")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"root"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"songPackage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//分包根的目录")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pages"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pages/recommendSong/index"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pages/songDetail/index"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//分包页面路径，相对与分包根目录")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"root"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"otherPackage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//分包根的目录")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pages"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pages/other/index"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//分包页面路径，相对与分包根目录")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 分包预加载")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"preloadRule"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n　　"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pages/index/index"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"network"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"all"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// all (不限网络)/wifi (仅wifi下预下载)")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"packages"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"songPackage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  　"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue"}},[t._v("#")]),t._v(" vue")]),t._v(" "),a("h4",{attrs:{id:"gzip压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gzip压缩"}},[t._v("#")]),t._v(" gzip压缩")]),t._v(" "),a("p",[t._v("https://www.jianshu.com/p/d765b4cda63b")]),t._v(" "),a("p",[t._v("gizp压缩是一种http请求优化方式，")]),t._v(" "),a("p",[t._v("通过减少文件体积来提高加载速度。")]),t._v(" "),a("p",[t._v("html、js、css文件甚至json数据都可以用它压缩，")]),t._v(" "),a("p",[t._v("可以减小60%以上的体积。")]),t._v(" "),a("h6",{attrs:{id:"_1-安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装依赖"}},[t._v("#")]),t._v(" 1 安装依赖")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm i compression-webpack-plugin -D\n")])])]),a("h6",{attrs:{id:"_2-vue-config-js中的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-vue-config-js中的配置"}},[t._v("#")]),t._v(" 2 vue.config.js中的配置")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" CompressionPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"compression-webpack-plugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("configureWebpack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompressionPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.js$|\\.html$|\\.css$|\\.jpg$|\\.jpeg$|\\.png")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 需要压缩的文件类型")]),t._v("\n            threshold"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10240")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 归档需要进行压缩的文件大小最小值，我这个是10K以上的进行压缩")]),t._v("\n            deleteOriginalAssets"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否删除原文件")]),t._v("\n            minRatio"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h6",{attrs:{id:"_3服务端开启gzip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3服务端开启gzip"}},[t._v("#")]),t._v(" 3服务端开启gzip")]),t._v(" "),a("h4",{attrs:{id:"代码分割code-split"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码分割code-split"}},[t._v("#")]),t._v(" 代码分割code split")]),t._v(" "),a("p",[t._v("https://www.jianshu.com/p/c42a817dc8cf4")]),t._v(" "),a("p",[t._v("Entry Points进行代码分割，但如果分割的代码引用了相同的依赖包，就会造成冗余")]),t._v(" "),a("p",[t._v("所以需要CommonsChunkPlugin这个插件把共用的依赖包抽取成一个新的bundle（班豆）")]),t._v(" "),a("p",[t._v("详细看webpack文档")]),t._v(" "),a("h5",{attrs:{id:"entry-points"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entry-points"}},[t._v("#")]),t._v(" Entry Points")]),t._v(" "),a("p",[t._v("这种是最简单也是最直观的代码分割方式，但是会存在一些问题。")]),t._v(" "),a("p",[t._v("方法就是在 webpack 配置文件中的 entry 字段添加新的入口：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const path = require('path');\n\nmodule.exports = {\n  entry: {\n    index: './src/index.js',\n    another: './src/another-module.js'\n  },\n  output: {\n    filename: '[name].bundle.js',\n    path: path.resolve(__dirname, 'dist')\n  }\n};\n")])])]),a("h5",{attrs:{id:"commonschunkplugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commonschunkplugin"}},[t._v("#")]),t._v(" CommonsChunkPlugin")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("module.exports = {\n  。。。\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'common' // bundle 名称\n    })\n  ],\n  。。。\n};\n")])])]),a("h5",{attrs:{id:"dynamic-imports"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-imports"}},[t._v("#")]),t._v(" Dynamic Imports")]),t._v(" "),a("p",[t._v("Webpack 的动态分割主要方式是使用符合 ECMAScript 提案的 import() 语法。语法如下")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import('path/to/module') -> Promise\n")])])]),a("p",[t._v("传入模块的路径，import() 会返回一个Promise。这个模块就会被当作分割点。意味着这个模块和它的子模块都会被分割成一个单独的 chunk。并且，在 webpack 配置文件的 output 字段，需要添加一个 chunkFileName 属性。它决定非入口 chunk 的名称。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// vue-cli 生成的webpack.prod.conf.js\n// 注意 output 的 chunkFilename 属性\n// 这种写法分割出来的 bundle 会以 id + hash 的命名方式\n// 比如 1.32326e28f3acec4b3a9a.js\noutput: {\n  path: config.build.assetsRoot,\n  filename: utils.assetsPath('js/[name].[chunkhash].js'),\n  chunkFilename: utils.assetsPath('js/[id].[chunkhash].js')\n},\n")])])]),a("h4",{attrs:{id:"使用-babel缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-babel缓存"}},[t._v("#")]),t._v(" 使用 babel缓存")]),t._v(" "),a("p",[t._v("https://blog.csdn.net/kouzuhuai2956/article/details/108078484")]),t._v(" "),a("p",[t._v("babel-loader在执行的时候，可能会产生一些运行期间重复的公共文件，")]),t._v(" "),a("p",[t._v("造成代码体积大冗余，同时也会减慢编译效率")]),t._v(" "),a("p",[t._v("可以加上cacheDirectory参数")]),t._v(" "),a("p",[t._v("或者 使用babel-plugin-transform-runtime")]),t._v(" "),a("p",[t._v("详情看webpack文档")]),t._v(" "),a("h4",{attrs:{id:"dll-打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dll-打包"}},[t._v("#")]),t._v(" dll 打包")]),t._v(" "),a("p",[t._v("cli2")]),t._v(" "),a("p",[t._v("https://blog.csdn.net/przlovecsdn/article/details/82761912")]),t._v(" "),a("p",[t._v("https://blog.csdn.net/weixin_40970987/article/details/108295765")]),t._v(" "),a("p",[t._v("cli3")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.cn/post/6844904166280658952",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-cli3中webpack.dll打包优化"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/57904852",target:"_blank",rel:"noopener noreferrer"}},[t._v("提升构建速度的方法（一）——DllPlugin"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.cn/post/6844904083858407438",target:"_blank",rel:"noopener noreferrer"}},[t._v("dll打包多个入口"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("此时先构建webpack.dll.conf.js，执行完毕产出vendor.dll.js和vendor.manifest.js两个文件。webpack.DllReferencePlugin引用manifest.json")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("报错：Error"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DllPlugin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" supply an Array "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" entry\n局部安装webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cli 入口js需要是数组\n")])])]),a("h4",{attrs:{id:"编译移除console"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译移除console"}},[t._v("#")]),t._v(" 编译移除console")]),t._v(" "),a("p",[t._v("安装依赖")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("babel-plugin-transform-remove-console\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// babel.config.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" productionPlugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  productionPlugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'transform-remove-console'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  presets"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@vue/cli-plugin-babel/preset'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"component"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"libraryName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"element-ui"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"styleLibraryName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"theme-chalk"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("productionPlugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/plugin-syntax-dynamic-import'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"vue-config-js-配置-开发入口-打包入口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-config-js-配置-开发入口-打包入口"}},[t._v("#")]),t._v(" vue.config.js 配置 开发入口 打包入口")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("chainWebpack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/main-prod.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/main-dev.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"cdn-externals优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cdn-externals优化"}},[t._v("#")]),t._v(" CDN +externals优化")]),t._v(" "),a("p",[t._v("http://www.52codes.net/develop/javascript/57739.html")]),t._v(" "),a("p",[a("strong",[t._v("1.引入CDN链接")])]),t._v(" "),a("p",[t._v("在项目的 index.html 中，常规方式引入 CDN 链接，此处以 vue 和 element-ui 为例：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<body>\n <div id="app"></div>\n \x3c!-- CDN方式引入vue --\x3e\n <script src="https://unpkg.com/vue/dist/vue.js"><\/script>\n \x3c!-- CDN方式引入element-ui --\x3e\n <script src="https://unpkg.com/element-ui@2.8.2/lib/index.js"><\/script>\n</body>\n')])])]),a("p",[a("strong",[t._v("2添加externals属性")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vue-cli 2 ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在项目的 build/webpack.base.conf.js 中，在下面合适位置添加 externals 相关语句，在 entry 后面加入即可：")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n context"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/main.js'")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n externals"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-ui'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ElementUI'")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vue-cli 3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在项目根目录的 vue.config.js 中，将 configureWebpack 配置代码块添加进入即可：")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n configureWebpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   externals"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-ui'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ElementUI'")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Vue-cli 3  chainWebpack")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("module.exports = {\n    chainWebpack:config=>{\n        //发布模式\n        ...复制下面\n\n            //使用externals设置排除项\n            config.set('externals',{\n                vue:'Vue',\n                'vue-router':'VueRouter',\n                axios:'axios',\n                lodash:'_',\n                echarts:'echarts',\n                nprogress:'NProgress',\n                'vue-quill-editor':'VueQuillEditor'\n            })\n        })\n        //开发模式\n        ...复制上面\n    }\n}\n")])])]),a("p",[a("strong",[t._v("3.注释import及Vue.use(xxx)")])]),t._v(" "),a("p",[t._v("在项目的 src/main.js 中，注释掉以下语句：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// import Vue from 'vue'\n// import ElementUI from 'element-ui'\n// import 'element-ui/lib/theme-chalk/index.css'\nimport App from './App'\n\nVue.config.productionTip = false\n\n// Vue.use(ElementUI)\n")])])]),a("p",[t._v("注：使用 eslint 规则的项目请不要注释 import 及 Vue.use，除非你不使用那烦人的 eslint。")]),t._v(" "),a("p",[t._v("完成后执行 npm run build，你会发现编译后的 vendor.js 从几百K降到几十K，也就意味着优化体积已经成效。")]),t._v(" "),a("p",[t._v("如果引入 CDN 之后，记得把按需引入的配置去掉哦，因为引入 CDN 之后就不存在按需引入这种说法啦！")]),t._v(" "),a("h4",{attrs:{id:"定制首页内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定制首页内容"}},[t._v("#")]),t._v(" 定制首页内容")]),t._v(" "),a("p",[t._v("开发环境的首页和发布环境的首页展示内容的形式有所不同\n如开发环境中使用的是import加载第三方包，")]),t._v(" "),a("p",[t._v("而发布环境则是使用CDN，那么首页也需根据环境不同来进行不同的实现\n我们可以通过插件的方式来定制首页内容，打开vue.config.js")]),t._v(" "),a("p",[t._v("编写代码如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("module.exports = {\n    chainWebpack:config=>{\n        config.when(process.env.NODE_ENV === 'production',config=>{\n            ......           \n            //使用插件\n            config.plugin('html').tap(args=>{\n                //添加参数isProd\n                args[0].isProd = true\n                return args\n            })\n        })\n        config.when(process.env.NODE_ENV === 'development',config=>{\n            config.entry('app').clear().add('./src/main-dev.js')\n            //使用插件\n            config.plugin('html').tap(args=>{\n                //添加参数isProd\n                args[0].isProd = false\n                return args\n            })\n        })\n    }\n}\n")])])]),a("p",[t._v("然后在public/index.html中使用插件判断是否为发布环境并定制首页内容")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    ...\n    <title><%= htmlWebpackPlugin.options.isProd ? '' : 'dev - ' %>电商后台管理系统</title>\n    <% if(htmlWebpackPlugin.options.isProd){ %>\n    ...这是生产模式引入的cdn,全部写在中间,开发模式会跳过\n    <% } %>\n  </head>\n  .......\n")])])]),a("h4",{attrs:{id:"路由懒加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由懒加载"}},[t._v("#")]),t._v(" 路由懒加载")]),t._v(" "),a("p",[t._v("当路由被访问时才加载对应的路由文件，就是路由懒加载。\n1.安装 @babel/plugin-syntax-dynamic-import")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install babel-plugin-syntax-dynamic-import -D\n")])])]),a("p",[t._v("2.在babel.config.js中声明该插件")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('//项目发布阶段需要用到的babel插件\nconst productPlugins = []\n\n//判断是开发还是发布阶段\nif(process.env.NODE_ENV === \'production\'){\n  //发布阶段\n  productPlugins.push("transform-remove-console")\n}\n\nmodule.exports = {\n  "presets": [\n    "@vue/app"\n  ],\n  "plugins": [\n    [\n      "component",\n      {\n        "libraryName": "element-ui",\n        "styleLibraryName": "theme-chalk"\n      }\n    ],\n    ...productPlugins,\n    //配置路由懒加载插件\n    "@babel/plugin-syntax-dynamic-import"\n  ]\n}\n')])])]),a("p",[t._v("3.将路由更改为按需加载的形式，打开router.js，更改引入组件代码如下：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Router "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-router'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// import Home from './components/Home.vue'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Home")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName:"Home" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/Home.vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"图片懒加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片懒加载"}},[t._v("#")]),t._v(" 图片懒加载")]),t._v(" "),a("h4",{attrs:{id:"fs-基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fs-基本使用"}},[t._v("#")]),t._v(" fs 基本使用")]),t._v(" "),a("p",[t._v("https://blog.csdn.net/github_38140984/article/details/83006101")]),t._v(" "),a("h3",{attrs:{id:"项目上线"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目上线"}},[t._v("#")]),t._v(" 项目上线")]),t._v(" "),a("h5",{attrs:{id:"a-通过node创建服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#a-通过node创建服务器"}},[t._v("#")]),t._v(" A.通过node创建服务器")]),t._v(" "),a("p",[t._v("在vue_shop同级创建一个文件夹vue_shop_server存放node服务器\n使用终端打开vue_shop_server文件夹，输入命令 npm init -y\n初始化包之后，输入命令 npm i express -S\n打开vue_shop目录，复制dist文件夹，粘贴到vue_shop_server中\n在vue_shop_server文件夹中创建app.js文件,编写代码如下：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const express = require('express')\nconst app = express()\napp.use(express.static('./dist'))\napp.listen(8998,()=>{\n    console.log(\"server running at http://127.0.0.1:8998\")\n})\n")])])]),a("p",[t._v("然后再次在终端中输入  node app.js")]),t._v(" "),a("h5",{attrs:{id:"b-开启gzip压缩-服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#b-开启gzip压缩-服务端"}},[t._v("#")]),t._v(" B.开启gzip压缩--服务端")]),t._v(" "),a("p",[t._v("打开vue_shop_server文件夹的终端，输入命令：npm i compression -D\n打开app.js,编写代码：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const express = require('express')\nconst compression = require('compression')\nconst app = express()\n\napp.use(compression())\napp.use(express.static('./dist'))\n\napp.listen(8998,()=>{\n    console.log(\"server running at http://127.0.0.1:8998\")\n})\n")])])]),a("h5",{attrs:{id:"c-配置https服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#c-配置https服务"}},[t._v("#")]),t._v(" C.配置https服务")]),t._v(" "),a("p",[t._v("配置https服务一般是后台进行处理，前端开发人员了解即可。\n首先，需要申请SSL证书，进入https://freessl.cn官网\n在后台导入证书，打开今天资料/素材，复制素材中的两个文件到vue_shop_server中\n打开app.js文件，编写代码导入证书，并开启https服务")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const express = require('express')\nconst compression = require('compression')\nconst https = require('https')\nconst fs = require('fs')\n\nconst app = express()\n//创建配置对象设置公钥和私钥\nconst options = {\n    cert:fs.readFileSync('./full_chain.pem'),\n    key:fs.readFileSync('./private.key')\n}\n\napp.use(compression())\napp.use(express.static('./dist'))\n\n// app.listen(8998,()=>{\n//     console.log(\"server running at http://127.0.0.1:8998\")\n// })\n\n//启动https服务\nhttps.createServer(options,app).listen(443)\n")])])]),a("p",[t._v("注意：因为我们使用的证书有问题，所以无法正常使用https服务")])])}),[],!1,null,null,null);s.default=e.exports}}]);