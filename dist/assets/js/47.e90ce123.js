(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{203:function(t,s,a){"use strict";a.r(s);var n=a(7),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"部署上线"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署上线"}},[t._v("#")]),t._v(" 部署上线")]),t._v(" "),a("h3",{attrs:{id:"安装node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装node"}},[t._v("#")]),t._v(" 安装node")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/qq_30604453/article/details/86243868",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa2项目部署在阿里云服务器"),a("OutboundLink")],1)]),t._v(" "),a("h4",{attrs:{id:"ubantu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubantu"}},[t._v("#")]),t._v(" Ubantu")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("在安装前先更新 apt-get\nsudo apt-get update\n\n更新完毕就可以开始安装nodejs\nsudo apt-get install nodejs\n")])])]),a("h4",{attrs:{id:"centos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos"}},[t._v("#")]),t._v(" centos")]),t._v(" "),a("p",[t._v("node下载地址http://nodejs.cn/download/")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("选一个下载目录\n\tcd /usr/local/src/\n下载\n\twget https://npm.taobao.org/mirrors/node/v14.15.5/node-v14.15.5-linux-x64.tar.xz\n\n如果提示y/n? 你一路y到底\n\n如果没有解压工具，先安装解压文件插件，有则跳过，一般有的\nyum install -y tar\n \n解压文件\n\ttar -xvf node-v14.15.5-linux-x64.tar.xz\n改名\n\tmv node-v14.15.5-linux-x64  nodejs \n\n确认一下nodejs下bin目录是否有node和npm文件，如果有执行软连接\n  --1、软链接就是：ln –s 源文件 目标文件，\n  --只会在选定的位置上生成一个文件的镜像，不会占用磁盘空间，类似与windows的快捷方式。\n  --2、硬链接ln源文件目标文件，没有参数-s，\n  --会在选定的位置上生成一个和源文件大小相同的文件，无论是软链接还是硬链接，文件都保持同步变化。\n  ln -sv /usr/local/src/nodejs/bin/npm   /usr/local/bin/ \n  ln -sv /usr/local/src/nodejs/bin/node   /usr/local/bin/\n \n验证nodejs是否安装好\n\tnode -v\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("配置npm 镜像地址\n 查看当前镜像：\n `npm config get registry`\n\n下载淘宝镜像\n npm install -g cnpm --registry=https://registry.npm.taobao.org\n\n 切换镜像\n npm config set registry https://registry.npm.taobao.org \n \n回车直接设置成功，没反应的\n\n再查看是否切换成功即可\nnpm config get registry\n")])])]),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Cadmin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210225111521654.png",alt:"image-20210225111521654"}})]),t._v(" "),a("p",[t._v("成功")]),t._v(" "),a("h3",{attrs:{id:"安装mysql5-7-24"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql5-7-24"}},[t._v("#")]),t._v(" 安装mysql5.7.24")]),t._v(" "),a("p",[t._v("centos")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/276d59cbc529",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux下安装mysql-5.7.24"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"http://www.3qphp.com/mysql/sqlquest/2859.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ERROR! The server quit without updating PID file"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("有问题的，没成功")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("检查mysql用户组和用户是否存在，如果没有，则创建\ncat "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("group "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep mysql\ncat "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("passwd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("grep mysql\ngroupadd mysql\nuseradd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("r "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g mysql mysql\n\n找个目录\ncd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" \n下载\nwget https"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.24-linux-glibc2.12-x86_64.tar.gz")]),t._v("\n解压\ntar xzvf mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("glibc2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x86_64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gz\n  \n移动解压好的文件夹到"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local，并命名为mysql\nmv mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("glibc2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x86_64 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql\n  \n  如果"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("下已经存在mysql\n  mv mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("glibc2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x86_64 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n  cd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n  mv mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("glibc2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x86_64 mysql\n  \n在"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql目录下创建data目录\nmkdir "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("data\n  \ncd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("initialize "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mysql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("datadir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("basedir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql\n最后一行root@localhost的临时密码记一下，比如sqW"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("kCBij5aa \n  启动服务\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("support"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("files"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("server start\n  报错：mysqld_safe error"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" log"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("error set to "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/var/log/mariadb/mariadb.log'")]),t._v("\n  可能没有mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log文件\n    mkdir "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mariadb\n    touch "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mariadb"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log\n    chown "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("R mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("db "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mariadb"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n      重新启动试试\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("support"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("files"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("server start\n      继续报错ERROR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" The server quit without updating PID file\n      无解，还是用小皮phpstudy吧\n      \n  软链接\nln "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("sv "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("support"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("files"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("init"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql\n  ln "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("sv "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql\n")])])]),a("h3",{attrs:{id:"安装-pm2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-pm2"}},[t._v("#")]),t._v(" 安装 pm2")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install pm2 -g\n")])])]),a("p",[t._v("pm2 -v")]),t._v(" "),a("p",[t._v("提示 pm2 command not found")]),t._v(" "),a("p",[t._v("表示pm2没有加入环境变量。")]),t._v(" "),a("p",[t._v("此时需要配置好pm2环境变量。")]),t._v(" "),a("p",[t._v("ln -sv   /usr/local/src/nodejs/bin/pm2   /usr/local/bin")]),t._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Cadmin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210225112343339.png",alt:"image-20210225112343339"}})]),t._v(" "),a("p",[t._v("安装：npm i pm2 -g\n使用pm2启动项目，在终端中输入命令：pm2 start app.js --name zidingyimingzi\n查看项目列表命令：pm2 ls\n重启项目：pm2 restart 自定义名称\n停止项目：pm2 stop 自定义名称\n删除项目：pm2 delete 自定义名称")]),t._v(" "),a("h2",{attrs:{id:"nginx-windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-windows"}},[t._v("#")]),t._v(" nginx(windows)")]),t._v(" "),a("p",[t._v("http://tengine.taobao.org/nginx_docs/cn/docs/windows.html")]),t._v(" "),a("h3",{attrs:{id:"前期准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前期准备"}},[t._v("#")]),t._v(" 前期准备")]),t._v(" "),a("p",[t._v("官网下载解压http://nginx.org/en/download.html")]),t._v(" "),a("p",[t._v("去到解压的目录，"),a("code",[t._v("start nginx.exe")])]),t._v(" "),a("p",[t._v("查看任务进程是否存在，dos或打开任务管理器都行")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('tasklist /fi "imagename eq nginx.exe"\n')])])]),a("p",[t._v("如果失败，可能是80端口被占用，nginx.confog里面修改")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("nginx -s stop")]),t._v(" "),a("th",[t._v("快速退出")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("nginx -s quit")]),t._v(" "),a("td",[t._v("优雅退出")])]),t._v(" "),a("tr",[a("td",[t._v("nginx -s reload")]),t._v(" "),a("td",[t._v("更换配置，启动新的工作进程，优雅的关闭以往的工作进程")])]),t._v(" "),a("tr",[a("td",[t._v("nginx -s reopen")]),t._v(" "),a("td",[t._v("重新打开日志文件")])])])]),t._v(" "),a("p",[a("strong",[t._v("报错没有nginx.pid")]),t._v("，任务管理器把nginx.exe全部结束，重新 start nginx ，就会生成logs/nginx.pid")]),t._v(" "),a("p",[t._v("修改完成后保存，使用以下命令检查一下配置文件是否正确，后面是nginx.conf文件的路径，successful就说明正确了")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("nginx -t -c /nginx-1.15.2/conf/nginx.conf\n")])])]),a("h3",{attrs:{id:"代理部署项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代理部署项目"}},[t._v("#")]),t._v(" 代理部署项目")]),t._v(" "),a("p",[t._v("项目build好")]),t._v(" "),a("p",[t._v("配置ngnix的配置文件nginx.conf,然后重启运行即可")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("server\n{\n   listen 3003;\n   server_name localhost;\n   ##  所有3003请求发给5500\n   location = / {\n       proxy_pass http://localhost:5500;\n   }\n   ##  所有3003/no开头的请求转去3000/no\n   location /no {\n       proxy_pass http://localhost:3000;\n   }\n   ##  所有3003/ok/的请求转去3000/ok/\n   location /ok/ {\n       proxy_pass http://localhost:3000;\n   }\n}\n")])])]),a("p",[t._v("上面代码的意思是将localhost:3003转发为location:5500,")]),t._v(" "),a("p",[t._v("也就是说现在访问localhost:3003实际上是访问location:5500,")]),t._v(" "),a("p",[t._v("而访问localhost:3003/no则是访问localhost:3000,并以no开头的url")]),t._v(" "),a("h2",{attrs:{id:"nginx-linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-linux"}},[t._v("#")]),t._v(" nginx(linux)")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/hyry/p/11927550.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux 部署vue项目(使用nginx)"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000019227927",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx解决跨域问题"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/chinaWu/p/14035181.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx安装"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("默认安装目录cd /usr/local/nginx/")]),t._v(" "),a("p",[t._v("打包文件推荐路径：mkdir -p  /usr/local/webapp/dist")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#查看运行\nps -ef | grep nginx\n\n查找主配置文件\n/usr/sbin/nginx -t\n\n可用查找配置文件路径\ncat /etc/nginx/nginx.conf \n\n配置文件在\ncd /usr/local/nginx/conf/nginx.conf\nvim nginx.conf\n")])])]),a("h4",{attrs:{id:"前端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端"}},[t._v("#")]),t._v(" 前端")]),t._v(" "),a("p",[t._v("原理：")]),t._v(" "),a("p",[t._v("数据在3000端口，你访问nginx的3002，nginx给你访问3000")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ready")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#get'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3002/ok'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  带cookies的请求")]),t._v("\n      xhrFields"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        withCredentials"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fail'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"nginx-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-conf"}},[t._v("#")]),t._v(" nginx.conf")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vim 你的 nginx.conf\nserver\n{\n    listen 3002;\n    server_name localhost;\n    # 注意设定 root路径是有dist的\n    location / {\n      root /usr/local/webapp/dist;\n      index /index.html;\n    }\n\n    #跨域 ip和port自行替换\n    location /adminApi {\n      proxy_pass http://ip:port;\n  \t}\n    location /ok {\n        proxy_pass http://localhost:3000;\n\n        #   指定允许跨域的方法，*代表所有\n        add_header Access-Control-Allow-Methods *;\n\n        #   预检命令的缓存，如果不缓存每次会发送两次请求\n        add_header Access-Control-Max-Age 3600;\n        \n        #   带cookie请求需要加上这个字段，并设置为true\n        add_header Access-Control-Allow-Credentials true;\n\n        #   表示允许这个域跨域调用（客户端发送请求的域名和端口） \n        #   $http_origin动态获取请求客户端请求的域   不用*的原因是带cookie的请求不支持*号\n        add_header Access-Control-Allow-Origin $http_origin;\n\n        #   表示请求头的字段 动态获取\n        add_header Access-Control-Allow-Headers \n        $http_access_control_request_headers;\n\n        #   OPTIONS预检命令，预检命令通过时才发送请求\n        #   检查请求的类型是不是预检命令\n        if ($request_method = OPTIONS){\n            return 200;\n        }\n    }\n}\n")])])]),a("h3",{attrs:{id:"使配置生效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使配置生效"}},[t._v("#")]),t._v(" 使配置生效")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sbin/nginx -s reload\nsbin/nginx -s stop\nsbin/nginx\n")])])]),a("h2",{attrs:{id:"管理站点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#管理站点"}},[t._v("#")]),t._v(" 管理站点")]),t._v(" "),a("h3",{attrs:{id:"宝塔"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#宝塔"}},[t._v("#")]),t._v(" 宝塔")]),t._v(" "),a("p",[t._v("https://blog.csdn.net/weixin_47472689/article/details/112269731")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh\n")])])]),a("h5",{attrs:{id:"粘贴入命令行后回车-所有选择全部yes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#粘贴入命令行后回车-所有选择全部yes"}},[t._v("#")]),t._v(" 粘贴入命令行后回车，所有选择全部yes")]),t._v(" "),a("p",[t._v("https://www.cnblogs.com/yingyigongzi/p/13926828.html")]),t._v(" "),a("h3",{attrs:{id:"小皮phpstudy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小皮phpstudy"}},[t._v("#")]),t._v(" 小皮phpstudy")]),t._v(" "),a("p",[t._v("添加网站，要加端口，端口要在安全组放行，然后把文件上传对应文件夹即可")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/3029badffd49",target:"_blank",rel:"noopener noreferrer"}},[t._v("phpstudy添加网站"),a("OutboundLink")],1)]),t._v(" "),a("h1",{attrs:{id:"自动部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动部署"}},[t._v("#")]),t._v(" 自动部署")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/nxmin/p/10637648.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("cli3自动部署项目"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("https://segmentfault.com/a/1190000038751033?utm_source=tag-newest")])])}),[],!1,null,null,null);s.default=r.exports}}]);