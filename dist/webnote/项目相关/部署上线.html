<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>部署上线 | web-note</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Hello!">
    
    <link rel="preload" href="/assets/css/0.styles.495d9abf.css" as="style"><link rel="preload" href="/assets/js/app.7e40d91d.js" as="script"><link rel="preload" href="/assets/js/2.74dbbd17.js" as="script"><link rel="preload" href="/assets/js/47.e90ce123.js" as="script"><link rel="prefetch" href="/assets/js/10.77e92b90.js"><link rel="prefetch" href="/assets/js/11.3a155bc5.js"><link rel="prefetch" href="/assets/js/12.57e510a0.js"><link rel="prefetch" href="/assets/js/13.6c53bfae.js"><link rel="prefetch" href="/assets/js/14.3cf9d9fc.js"><link rel="prefetch" href="/assets/js/15.0fc8a75c.js"><link rel="prefetch" href="/assets/js/16.c3659273.js"><link rel="prefetch" href="/assets/js/17.bab2e92a.js"><link rel="prefetch" href="/assets/js/18.5e9a7a92.js"><link rel="prefetch" href="/assets/js/19.4d3429e9.js"><link rel="prefetch" href="/assets/js/20.74acf710.js"><link rel="prefetch" href="/assets/js/21.06267600.js"><link rel="prefetch" href="/assets/js/22.7839cedf.js"><link rel="prefetch" href="/assets/js/23.3dce0edf.js"><link rel="prefetch" href="/assets/js/24.7fdebc9b.js"><link rel="prefetch" href="/assets/js/25.0a24ef84.js"><link rel="prefetch" href="/assets/js/26.617ba23a.js"><link rel="prefetch" href="/assets/js/27.c04c0547.js"><link rel="prefetch" href="/assets/js/28.0d4133a3.js"><link rel="prefetch" href="/assets/js/29.cbcccb09.js"><link rel="prefetch" href="/assets/js/3.2366cf4f.js"><link rel="prefetch" href="/assets/js/30.6d818151.js"><link rel="prefetch" href="/assets/js/31.bdec4218.js"><link rel="prefetch" href="/assets/js/32.557433ae.js"><link rel="prefetch" href="/assets/js/33.dd58f41e.js"><link rel="prefetch" href="/assets/js/34.1bf13c14.js"><link rel="prefetch" href="/assets/js/35.54db212c.js"><link rel="prefetch" href="/assets/js/36.afda7bc0.js"><link rel="prefetch" href="/assets/js/37.ab829cda.js"><link rel="prefetch" href="/assets/js/38.daee3887.js"><link rel="prefetch" href="/assets/js/39.c2abbe56.js"><link rel="prefetch" href="/assets/js/4.0fc60aac.js"><link rel="prefetch" href="/assets/js/40.be866923.js"><link rel="prefetch" href="/assets/js/41.4f63824e.js"><link rel="prefetch" href="/assets/js/42.10ba89b1.js"><link rel="prefetch" href="/assets/js/43.0f723e0c.js"><link rel="prefetch" href="/assets/js/44.f6bc51da.js"><link rel="prefetch" href="/assets/js/45.dd0bbd15.js"><link rel="prefetch" href="/assets/js/46.f3da7dbb.js"><link rel="prefetch" href="/assets/js/48.f3be3a42.js"><link rel="prefetch" href="/assets/js/5.c8b01998.js"><link rel="prefetch" href="/assets/js/6.b63dc30b.js"><link rel="prefetch" href="/assets/js/7.ac8ece09.js"><link rel="prefetch" href="/assets/js/8.9fcf4328.js"><link rel="prefetch" href="/assets/js/9.e105d6a1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.495d9abf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">web-note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/" class="nav-link">
  笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese/" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/language/english/" class="nav-link">
  英文
</a></li></ul></div></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  去百度!
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/" class="nav-link">
  笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese/" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/language/english/" class="nav-link">
  英文
</a></li></ul></div></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  去百度!
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">welcome</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安装环境</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>项目相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webnote/项目相关/mock模拟数据.html" class="sidebar-link">mock模拟数据</a></li><li><a href="/webnote/项目相关/svn.html" class="sidebar-link">svn使用</a></li><li><a href="/webnote/项目相关/前端开发规范.html" class="sidebar-link">前端代码规范</a></li><li><a href="/webnote/项目相关/支付功能.html" class="sidebar-link">支付功能</a></li><li><a href="/webnote/项目相关/登录.html" class="sidebar-link">登录验证</a></li><li><a href="/webnote/项目相关/跨域.html" class="sidebar-link">跨域问题</a></li><li><a href="/webnote/项目相关/部署上线.html" class="active sidebar-link">部署上线</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/项目相关/部署上线.html#nginx-windows" class="sidebar-link">nginx(windows)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/项目相关/部署上线.html#前期准备" class="sidebar-link">前期准备</a></li><li class="sidebar-sub-header"><a href="/webnote/项目相关/部署上线.html#代理部署项目" class="sidebar-link">代理部署项目</a></li></ul></li><li class="sidebar-sub-header"><a href="/webnote/项目相关/部署上线.html#nginx-linux" class="sidebar-link">nginx(linux)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/项目相关/部署上线.html#使配置生效" class="sidebar-link">使配置生效</a></li></ul></li><li class="sidebar-sub-header"><a href="/webnote/项目相关/部署上线.html#管理站点" class="sidebar-link">管理站点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/项目相关/部署上线.html#宝塔" class="sidebar-link">宝塔</a></li><li class="sidebar-sub-header"><a href="/webnote/项目相关/部署上线.html#小皮phpstudy" class="sidebar-link">小皮phpstudy</a></li></ul></li></ul></li><li><a href="/webnote/项目相关/项目优化.html" class="sidebar-link">项目优化</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="部署上线"><a href="#部署上线" class="header-anchor">#</a> 部署上线</h1> <h3 id="安装node"><a href="#安装node" class="header-anchor">#</a> 安装node</h3> <p><a href="https://blog.csdn.net/qq_30604453/article/details/86243868" target="_blank" rel="noopener noreferrer">koa2项目部署在阿里云服务器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="ubantu"><a href="#ubantu" class="header-anchor">#</a> Ubantu</h4> <div class="language- extra-class"><pre class="language-text"><code>在安装前先更新 apt-get
sudo apt-get update

更新完毕就可以开始安装nodejs
sudo apt-get install nodejs
</code></pre></div><h4 id="centos"><a href="#centos" class="header-anchor">#</a> centos</h4> <p>node下载地址http://nodejs.cn/download/</p> <div class="language- extra-class"><pre class="language-text"><code>选一个下载目录
	cd /usr/local/src/
下载
	wget https://npm.taobao.org/mirrors/node/v14.15.5/node-v14.15.5-linux-x64.tar.xz

如果提示y/n? 你一路y到底

如果没有解压工具，先安装解压文件插件，有则跳过，一般有的
yum install -y tar
 
解压文件
	tar -xvf node-v14.15.5-linux-x64.tar.xz
改名
	mv node-v14.15.5-linux-x64  nodejs 

确认一下nodejs下bin目录是否有node和npm文件，如果有执行软连接
  --1、软链接就是：ln –s 源文件 目标文件，
  --只会在选定的位置上生成一个文件的镜像，不会占用磁盘空间，类似与windows的快捷方式。
  --2、硬链接ln源文件目标文件，没有参数-s，
  --会在选定的位置上生成一个和源文件大小相同的文件，无论是软链接还是硬链接，文件都保持同步变化。
  ln -sv /usr/local/src/nodejs/bin/npm   /usr/local/bin/ 
  ln -sv /usr/local/src/nodejs/bin/node   /usr/local/bin/
 
验证nodejs是否安装好
	node -v
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>配置npm 镜像地址
 查看当前镜像：
 `npm config get registry`

下载淘宝镜像
 npm install -g cnpm --registry=https://registry.npm.taobao.org

 切换镜像
 npm config set registry https://registry.npm.taobao.org 
 
回车直接设置成功，没反应的

再查看是否切换成功即可
npm config get registry
</code></pre></div><p><img src="C:%5CUsers%5Cadmin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210225111521654.png" alt="image-20210225111521654"></p> <p>成功</p> <h3 id="安装mysql5-7-24"><a href="#安装mysql5-7-24" class="header-anchor">#</a> 安装mysql5.7.24</h3> <p>centos</p> <p><a href="https://www.jianshu.com/p/276d59cbc529" target="_blank" rel="noopener noreferrer">Linux下安装mysql-5.7.24<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://www.3qphp.com/mysql/sqlquest/2859.html" target="_blank" rel="noopener noreferrer">ERROR! The server quit without updating PID file<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>有问题的，没成功</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>检查mysql用户组和用户是否存在，如果没有，则创建
cat <span class="token operator">/</span>etc<span class="token operator">/</span>group <span class="token operator">|</span> grep mysql
cat <span class="token operator">/</span>etc<span class="token operator">/</span>passwd <span class="token operator">|</span>grep mysql
groupadd mysql
useradd <span class="token operator">-</span>r <span class="token operator">-</span>g mysql mysql

找个目录
cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span> 
下载
wget https<span class="token operator">:</span><span class="token comment">//dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.24-linux-glibc2.12-x86_64.tar.gz</span>
解压
tar xzvf mysql<span class="token operator">-</span><span class="token number">5.7</span><span class="token punctuation">.</span><span class="token number">24</span><span class="token operator">-</span>linux<span class="token operator">-</span>glibc2<span class="token punctuation">.</span><span class="token number">12</span><span class="token operator">-</span>x86_64<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
  
移动解压好的文件夹到<span class="token operator">/</span>usr<span class="token operator">/</span>local，并命名为mysql
mv mysql<span class="token operator">-</span><span class="token number">5.7</span><span class="token punctuation">.</span><span class="token number">24</span><span class="token operator">-</span>linux<span class="token operator">-</span>glibc2<span class="token punctuation">.</span><span class="token number">12</span><span class="token operator">-</span>x86_64 <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql
  
  如果<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>下已经存在mysql
  mv mysql<span class="token operator">-</span><span class="token number">5.7</span><span class="token punctuation">.</span><span class="token number">24</span><span class="token operator">-</span>linux<span class="token operator">-</span>glibc2<span class="token punctuation">.</span><span class="token number">12</span><span class="token operator">-</span>x86_64 <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>
  cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>
  mv mysql<span class="token operator">-</span><span class="token number">5.7</span><span class="token punctuation">.</span><span class="token number">24</span><span class="token operator">-</span>linux<span class="token operator">-</span>glibc2<span class="token punctuation">.</span><span class="token number">12</span><span class="token operator">-</span>x86_64 mysql
  
在<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql目录下创建data目录
mkdir <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span>data
  
cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span>bin
<span class="token punctuation">.</span><span class="token operator">/</span>mysqld <span class="token operator">--</span>initialize <span class="token operator">--</span>user<span class="token operator">=</span>mysql <span class="token operator">--</span>datadir<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span>data <span class="token operator">--</span>basedir<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql
最后一行root@localhost的临时密码记一下，比如sqW<span class="token operator">&lt;</span>kCBij5aa 
  启动服务
<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span>support<span class="token operator">-</span>files<span class="token operator">/</span>mysql<span class="token punctuation">.</span>server start
  报错：mysqld_safe error<span class="token operator">:</span> log<span class="token operator">-</span>error set to <span class="token string">'/var/log/mariadb/mariadb.log'</span>
  可能没有mariadb<span class="token punctuation">.</span>log文件
    mkdir <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mariadb
    touch <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mariadb<span class="token operator">/</span>mariadb<span class="token punctuation">.</span>log
    chown <span class="token operator">-</span>R mysql<span class="token operator">:</span>db <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>mariadb<span class="token operator">/</span>
      重新启动试试
      <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span>support<span class="token operator">-</span>files<span class="token operator">/</span>mysql<span class="token punctuation">.</span>server start
      继续报错ERROR<span class="token operator">!</span> The server quit without updating PID file
      无解，还是用小皮phpstudy吧
      
  软链接
ln <span class="token operator">-</span>sv <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span>support<span class="token operator">-</span>files<span class="token operator">/</span>mysql<span class="token punctuation">.</span>server <span class="token operator">/</span>etc<span class="token operator">/</span>init<span class="token punctuation">.</span>d<span class="token operator">/</span>mysql
  ln <span class="token operator">-</span>sv <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>mysql<span class="token operator">/</span>bin<span class="token operator">/</span>mysql <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>mysql
</code></pre></div><h3 id="安装-pm2"><a href="#安装-pm2" class="header-anchor">#</a> 安装 pm2</h3> <div class="language- extra-class"><pre class="language-text"><code>npm install pm2 -g
</code></pre></div><p>pm2 -v</p> <p>提示 pm2 command not found</p> <p>表示pm2没有加入环境变量。</p> <p>此时需要配置好pm2环境变量。</p> <p>ln -sv   /usr/local/src/nodejs/bin/pm2   /usr/local/bin</p> <p><img src="C:%5CUsers%5Cadmin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210225112343339.png" alt="image-20210225112343339"></p> <p>安装：npm i pm2 -g
使用pm2启动项目，在终端中输入命令：pm2 start app.js --name zidingyimingzi
查看项目列表命令：pm2 ls
重启项目：pm2 restart 自定义名称
停止项目：pm2 stop 自定义名称
删除项目：pm2 delete 自定义名称</p> <h2 id="nginx-windows"><a href="#nginx-windows" class="header-anchor">#</a> nginx(windows)</h2> <p>http://tengine.taobao.org/nginx_docs/cn/docs/windows.html</p> <h3 id="前期准备"><a href="#前期准备" class="header-anchor">#</a> 前期准备</h3> <p>官网下载解压http://nginx.org/en/download.html</p> <p>去到解压的目录，<code>start nginx.exe</code></p> <p>查看任务进程是否存在，dos或打开任务管理器都行</p> <div class="language- extra-class"><pre class="language-text"><code>tasklist /fi &quot;imagename eq nginx.exe&quot;
</code></pre></div><p>如果失败，可能是80端口被占用，nginx.confog里面修改</p> <table><thead><tr><th>nginx -s stop</th> <th>快速退出</th></tr></thead> <tbody><tr><td>nginx -s quit</td> <td>优雅退出</td></tr> <tr><td>nginx -s reload</td> <td>更换配置，启动新的工作进程，优雅的关闭以往的工作进程</td></tr> <tr><td>nginx -s reopen</td> <td>重新打开日志文件</td></tr></tbody></table> <p><strong>报错没有nginx.pid</strong>，任务管理器把nginx.exe全部结束，重新 start nginx ，就会生成logs/nginx.pid</p> <p>修改完成后保存，使用以下命令检查一下配置文件是否正确，后面是nginx.conf文件的路径，successful就说明正确了</p> <div class="language- extra-class"><pre class="language-text"><code>nginx -t -c /nginx-1.15.2/conf/nginx.conf
</code></pre></div><h3 id="代理部署项目"><a href="#代理部署项目" class="header-anchor">#</a> 代理部署项目</h3> <p>项目build好</p> <p>配置ngnix的配置文件nginx.conf,然后重启运行即可</p> <div class="language- extra-class"><pre class="language-text"><code>server
{
   listen 3003;
   server_name localhost;
   ##  所有3003请求发给5500
   location = / {
       proxy_pass http://localhost:5500;
   }
   ##  所有3003/no开头的请求转去3000/no
   location /no {
       proxy_pass http://localhost:3000;
   }
   ##  所有3003/ok/的请求转去3000/ok/
   location /ok/ {
       proxy_pass http://localhost:3000;
   }
}
</code></pre></div><p>上面代码的意思是将localhost:3003转发为location:5500,</p> <p>也就是说现在访问localhost:3003实际上是访问location:5500,</p> <p>而访问localhost:3003/no则是访问localhost:3000,并以no开头的url</p> <h2 id="nginx-linux"><a href="#nginx-linux" class="header-anchor">#</a> nginx(linux)</h2> <p><a href="https://www.cnblogs.com/hyry/p/11927550.html" target="_blank" rel="noopener noreferrer">Linux 部署vue项目(使用nginx)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://segmentfault.com/a/1190000019227927" target="_blank" rel="noopener noreferrer">nginx解决跨域问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.cnblogs.com/chinaWu/p/14035181.html" target="_blank" rel="noopener noreferrer">nginx安装<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>默认安装目录cd /usr/local/nginx/</p> <p>打包文件推荐路径：mkdir -p  /usr/local/webapp/dist</p> <div class="language- extra-class"><pre class="language-text"><code>#查看运行
ps -ef | grep nginx

查找主配置文件
/usr/sbin/nginx -t

可用查找配置文件路径
cat /etc/nginx/nginx.conf 

配置文件在
cd /usr/local/nginx/conf/nginx.conf
vim nginx.conf
</code></pre></div><h4 id="前端"><a href="#前端" class="header-anchor">#</a> 前端</h4> <p>原理：</p> <p>数据在3000端口，你访问nginx的3002，nginx给你访问3000</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#get'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token operator">:</span><span class="token string">'http://localhost:3002/ok'</span><span class="token punctuation">,</span>
      <span class="token comment">//  带cookies的请求</span>
      xhrFields<span class="token operator">:</span><span class="token punctuation">{</span>
        withCredentials<span class="token operator">:</span><span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">error</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="nginx-conf"><a href="#nginx-conf" class="header-anchor">#</a> nginx.conf</h4> <div class="language- extra-class"><pre class="language-text"><code>vim 你的 nginx.conf
server
{
    listen 3002;
    server_name localhost;
    # 注意设定 root路径是有dist的
    location / {
      root /usr/local/webapp/dist;
      index /index.html;
    }

    #跨域 ip和port自行替换
    location /adminApi {
      proxy_pass http://ip:port;
  	}
    location /ok {
        proxy_pass http://localhost:3000;

        #   指定允许跨域的方法，*代表所有
        add_header Access-Control-Allow-Methods *;

        #   预检命令的缓存，如果不缓存每次会发送两次请求
        add_header Access-Control-Max-Age 3600;
        
        #   带cookie请求需要加上这个字段，并设置为true
        add_header Access-Control-Allow-Credentials true;

        #   表示允许这个域跨域调用（客户端发送请求的域名和端口） 
        #   $http_origin动态获取请求客户端请求的域   不用*的原因是带cookie的请求不支持*号
        add_header Access-Control-Allow-Origin $http_origin;

        #   表示请求头的字段 动态获取
        add_header Access-Control-Allow-Headers 
        $http_access_control_request_headers;

        #   OPTIONS预检命令，预检命令通过时才发送请求
        #   检查请求的类型是不是预检命令
        if ($request_method = OPTIONS){
            return 200;
        }
    }
}
</code></pre></div><h3 id="使配置生效"><a href="#使配置生效" class="header-anchor">#</a> 使配置生效</h3> <div class="language- extra-class"><pre class="language-text"><code>sbin/nginx -s reload
sbin/nginx -s stop
sbin/nginx
</code></pre></div><h2 id="管理站点"><a href="#管理站点" class="header-anchor">#</a> 管理站点</h2> <h3 id="宝塔"><a href="#宝塔" class="header-anchor">#</a> 宝塔</h3> <p>https://blog.csdn.net/weixin_47472689/article/details/112269731</p> <div class="language- extra-class"><pre class="language-text"><code>yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh
</code></pre></div><h5 id="粘贴入命令行后回车-所有选择全部yes"><a href="#粘贴入命令行后回车-所有选择全部yes" class="header-anchor">#</a> 粘贴入命令行后回车，所有选择全部yes</h5> <p>https://www.cnblogs.com/yingyigongzi/p/13926828.html</p> <h3 id="小皮phpstudy"><a href="#小皮phpstudy" class="header-anchor">#</a> 小皮phpstudy</h3> <p>添加网站，要加端口，端口要在安全组放行，然后把文件上传对应文件夹即可</p> <p><a href="https://www.jianshu.com/p/3029badffd49" target="_blank" rel="noopener noreferrer">phpstudy添加网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h1 id="自动部署"><a href="#自动部署" class="header-anchor">#</a> 自动部署</h1> <p><a href="https://www.cnblogs.com/nxmin/p/10637648.html" target="_blank" rel="noopener noreferrer">cli3自动部署项目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>https://segmentfault.com/a/1190000038751033?utm_source=tag-newest</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/29/2022, 7:51:07 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webnote/项目相关/跨域.html" class="prev">
        跨域问题
      </a></span> <span class="next"><a href="/webnote/项目相关/项目优化.html">
        项目优化
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7e40d91d.js" defer></script><script src="/assets/js/2.74dbbd17.js" defer></script><script src="/assets/js/47.e90ce123.js" defer></script>
  </body>
</html>
