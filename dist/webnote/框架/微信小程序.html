<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>微信小程序 | web-note</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Hello!">
    
    <link rel="preload" href="/assets/css/0.styles.495d9abf.css" as="style"><link rel="preload" href="/assets/js/app.7e40d91d.js" as="script"><link rel="preload" href="/assets/js/2.74dbbd17.js" as="script"><link rel="preload" href="/assets/js/34.1bf13c14.js" as="script"><link rel="prefetch" href="/assets/js/10.77e92b90.js"><link rel="prefetch" href="/assets/js/11.3a155bc5.js"><link rel="prefetch" href="/assets/js/12.57e510a0.js"><link rel="prefetch" href="/assets/js/13.6c53bfae.js"><link rel="prefetch" href="/assets/js/14.3cf9d9fc.js"><link rel="prefetch" href="/assets/js/15.0fc8a75c.js"><link rel="prefetch" href="/assets/js/16.c3659273.js"><link rel="prefetch" href="/assets/js/17.bab2e92a.js"><link rel="prefetch" href="/assets/js/18.5e9a7a92.js"><link rel="prefetch" href="/assets/js/19.4d3429e9.js"><link rel="prefetch" href="/assets/js/20.74acf710.js"><link rel="prefetch" href="/assets/js/21.06267600.js"><link rel="prefetch" href="/assets/js/22.7839cedf.js"><link rel="prefetch" href="/assets/js/23.3dce0edf.js"><link rel="prefetch" href="/assets/js/24.7fdebc9b.js"><link rel="prefetch" href="/assets/js/25.0a24ef84.js"><link rel="prefetch" href="/assets/js/26.617ba23a.js"><link rel="prefetch" href="/assets/js/27.c04c0547.js"><link rel="prefetch" href="/assets/js/28.0d4133a3.js"><link rel="prefetch" href="/assets/js/29.cbcccb09.js"><link rel="prefetch" href="/assets/js/3.2366cf4f.js"><link rel="prefetch" href="/assets/js/30.6d818151.js"><link rel="prefetch" href="/assets/js/31.bdec4218.js"><link rel="prefetch" href="/assets/js/32.557433ae.js"><link rel="prefetch" href="/assets/js/33.dd58f41e.js"><link rel="prefetch" href="/assets/js/35.54db212c.js"><link rel="prefetch" href="/assets/js/36.afda7bc0.js"><link rel="prefetch" href="/assets/js/37.ab829cda.js"><link rel="prefetch" href="/assets/js/38.daee3887.js"><link rel="prefetch" href="/assets/js/39.c2abbe56.js"><link rel="prefetch" href="/assets/js/4.0fc60aac.js"><link rel="prefetch" href="/assets/js/40.be866923.js"><link rel="prefetch" href="/assets/js/41.4f63824e.js"><link rel="prefetch" href="/assets/js/42.10ba89b1.js"><link rel="prefetch" href="/assets/js/43.0f723e0c.js"><link rel="prefetch" href="/assets/js/44.f6bc51da.js"><link rel="prefetch" href="/assets/js/45.dd0bbd15.js"><link rel="prefetch" href="/assets/js/46.f3da7dbb.js"><link rel="prefetch" href="/assets/js/47.e90ce123.js"><link rel="prefetch" href="/assets/js/48.f3be3a42.js"><link rel="prefetch" href="/assets/js/5.c8b01998.js"><link rel="prefetch" href="/assets/js/6.b63dc30b.js"><link rel="prefetch" href="/assets/js/7.ac8ece09.js"><link rel="prefetch" href="/assets/js/8.9fcf4328.js"><link rel="prefetch" href="/assets/js/9.e105d6a1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.495d9abf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">web-note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/" class="nav-link">
  笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese/" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/language/english/" class="nav-link">
  英文
</a></li></ul></div></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  去百度!
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/" class="nav-link">
  笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese/" class="nav-link">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/language/english/" class="nav-link">
  英文
</a></li></ul></div></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  去百度!
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">welcome</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安装环境</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>框架</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webnote/框架/react.html" class="sidebar-link">React</a></li><li><a href="/webnote/框架/vue.html" class="sidebar-link">vue</a></li><li><a href="/webnote/框架/微信小程序.html" class="active sidebar-link">微信小程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#生命周期" class="sidebar-link">生命周期</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#遍历" class="sidebar-link">遍历</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#data数据获取与更改" class="sidebar-link">data数据获取与更改</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#点击事件" class="sidebar-link">点击事件</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#pages与components-函数的写法" class="sidebar-link">pages与components  函数的写法</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#第三方框架" class="sidebar-link">第三方框架</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#通用公式" class="sidebar-link">通用公式</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#vscode插件" class="sidebar-link">vscode插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#使用less转wxss" class="sidebar-link">使用less转wxss</a></li></ul></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#wxss定义变量与使用变量" class="sidebar-link">wxss定义变量与使用变量</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#插件使用" class="sidebar-link">插件使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#wxparse" class="sidebar-link">wxparse</a></li></ul></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#自定义组件-传值" class="sidebar-link">自定义组件-传值</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#传值" class="sidebar-link">传值</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#标签传值-父-子" class="sidebar-link">标签传值  (父==&gt;子)</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#事件传值-子-父" class="sidebar-link">事件传值 (子==&gt;父)</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#父组件调用子组件的方法" class="sidebar-link">父组件调用子组件的方法</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#传值总结" class="sidebar-link">传值总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#与vue区别" class="sidebar-link">与vue区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#设置data" class="sidebar-link">设置data</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#点击事件-2" class="sidebar-link">点击事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#一些坑" class="sidebar-link">一些坑</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#scroll-y滚动失效" class="sidebar-link">scroll-y滚动失效</a></li></ul></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#支持es7-async" class="sidebar-link">支持ES7 async</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#封装wx-request" class="sidebar-link">封装wx.request</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#常用事件" class="sidebar-link">常用事件</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#购物车相关代码" class="sidebar-link">购物车相关代码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#加入购物车" class="sidebar-link">加入购物车</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#结算判断" class="sidebar-link">结算判断</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#获取购物车数据-遍历判断-根据check是否选中" class="sidebar-link">获取购物车数据, 遍历判断, 根据check是否选中</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#封装方法-设置购物车状态-总数-总价-勾选" class="sidebar-link">封装方法:   设置购物车状态: 总数 总价 勾选</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#全选框状态控制" class="sidebar-link">全选框状态控制</a></li></ul></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#sdk插件" class="sidebar-link">SDK插件</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#wx-navigate" class="sidebar-link">wx.navigate</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#项目问题" class="sidebar-link">项目问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#小程序使用vant" class="sidebar-link">小程序使用vant</a></li><li class="sidebar-sub-header"><a href="/webnote/框架/微信小程序.html#setdata异步问题" class="sidebar-link">setData异步问题</a></li></ul></li></ul></li><li><a href="/webnote/框架/框架对比.html" class="sidebar-link">React Vue 小程序对比</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目相关</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="微信小程序"><a href="#微信小程序" class="header-anchor">#</a> 微信小程序</h1> <h2 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h2> <p>https://blog.csdn.net/weixin_43352901/article/details/108036086</p> <table><thead><tr><th>onLoad</th> <th>监听页面加载</th></tr></thead> <tbody><tr><td>onReady</td> <td>监听页面初次渲染完成</td></tr> <tr><td>onShow</td> <td>监听页面显示</td></tr> <tr><td>onHide</td> <td>监听页面隐藏</td></tr> <tr><td>onUnload</td> <td>监听页面卸载</td></tr> <tr><td>onPullDownRefresh</td> <td>监听用户下拉动作</td></tr> <tr><td>onReachBottom</td> <td>页面上拉触底事件的处理函数</td></tr> <tr><td>onShareAppMessage</td> <td>用户点击右上角分享</td></tr></tbody></table> <h2 id="遍历"><a href="#遍历" class="header-anchor">#</a> 遍历</h2> <div class="language- extra-class"><pre class="language-text"><code>//wx:for-item=&quot;newName&quot; 可以把默认的item变为设置的newName，不设置默认item
&lt;view wx:for=&quot;{{list}}&quot; wx:key=&quot;index&quot;&gt;&gt;
  {{item.title}}
&lt;/view&gt;
</code></pre></div><h2 id="data数据获取与更改"><a href="#data数据获取与更改" class="header-anchor">#</a> data数据获取与更改</h2> <div class="language- extra-class"><pre class="language-text"><code>
this.data.xxx // 获取
this.setData({
xxx:xxx
}) // 更改
</code></pre></div><h2 id="点击事件"><a href="#点击事件" class="header-anchor">#</a> 点击事件</h2> <blockquote><p>bind+事件: 冒泡</p></blockquote> <blockquote><p>catch+事件: 不冒泡</p></blockquote> <h2 id="pages与components-函数的写法"><a href="#pages与components-函数的写法" class="header-anchor">#</a> pages与components  函数的写法</h2> <div class="language- extra-class"><pre class="language-text"><code>页面.js  方法放在data同级
组件.js  方法放在methods:{}里面
</code></pre></div><h2 id="第三方框架"><a href="#第三方框架" class="header-anchor">#</a> 第三方框架</h2> <table><thead><tr><th>腾讯</th> <th>wepy</th> <th>类vue</th></tr></thead> <tbody><tr><td>美团</td> <td>mpvue</td> <td>类vue</td></tr> <tr><td>京东</td> <td>taro</td> <td>类react</td></tr> <tr><td>滴滴</td> <td>chameleon</td> <td></td></tr> <tr><td></td> <td>uni-app</td> <td>类vue</td></tr></tbody></table> <h2 id="通用公式"><a href="#通用公式" class="header-anchor">#</a> 通用公式</h2> <div class="language- extra-class"><pre class="language-text"><code>750rpx 乘上 (设计稿px与设计稿宽度px)的比值
不能直接复制给width, 需要通过calc计算
calc(750rpx * 100 /page px)
</code></pre></div><h2 id="vscode插件"><a href="#vscode插件" class="header-anchor">#</a> vscode插件</h2> <h3 id="使用less转wxss"><a href="#使用less转wxss" class="header-anchor">#</a> 使用less转wxss</h3> <p>easy less插件, 	设置里面添加</p> <div class="language- extra-class"><pre class="language-text"><code>
&quot;less.compile&quot;:{
	&quot;outExt&quot;: &quot;.wxss&quot;
}
</code></pre></div><h2 id="wxss定义变量与使用变量"><a href="#wxss定义变量与使用变量" class="header-anchor">#</a> wxss定义变量与使用变量</h2> <div class="language- extra-class"><pre class="language-text"><code>声明
--themeColor: #bfa
--xx
引用
var(--themeColor)
var(--xx)
</code></pre></div><h2 id="插件使用"><a href="#插件使用" class="header-anchor">#</a> 插件使用</h2> <h3 id="wxparse"><a href="#wxparse" class="header-anchor">#</a> wxparse</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">1</span>、https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>icindy<span class="token operator">/</span>wxParse	

<span class="token number">2</span>、下载这个demo	

<span class="token number">3</span>、把demo里面的wxParse目录 拷贝到我们的项目里面

<span class="token number">4.1</span>、在要用到的页面的js里面引入  wxParse下面的js（page前面引入）
<span class="token keyword">var</span> WxParse <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../wxParse/wxParse.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token number">4.2</span>、在要用到的方法里或者成功回调里使用
<span class="token keyword">var</span> article <span class="token operator">=</span> <span class="token string">'&lt;div&gt;我是HTML代码&lt;/div&gt;'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
WxParse<span class="token punctuation">.</span><span class="token function">wxParse</span><span class="token punctuation">(</span><span class="token string">'article'</span><span class="token punctuation">,</span> <span class="token string">'html'</span><span class="token punctuation">,</span> article<span class="token punctuation">,</span> that<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// WxParse.wxParse(bindName , type, data, target,imagePadding)</span>
<span class="token comment">// 1.bindName绑定的数据名(必填)</span>
<span class="token comment">// 2.type可以为html或者md(必填)</span>
<span class="token comment">// 3.data为传入的具体数据(必填)</span>
<span class="token comment">// 4.target为Page对象,一般为this(必填)</span>
<span class="token comment">// 5.imagePadding为当图片自适应是左右的单一padding(默认为0,可选)</span>
</code></pre></div><p>5、可以在app.wxss引入 wxParse.wxss（第一行写就行）</p> <div class="language- extra-class"><pre><code>@import &quot;wxParse/wxParse.wxss&quot;;
</code></pre></div><p>6、模板 wxml引入下面代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token keyword">import</span> src<span class="token operator">=</span><span class="token string">&quot;你的路径/wxParse/wxParse.wxml&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    
<span class="token operator">&lt;</span>template is<span class="token operator">=</span><span class="token string">&quot;wxParse&quot;</span> data<span class="token operator">=</span><span class="token string">&quot;{{wxParseData:article.nodes}}&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>j</p> <h2 id="自定义组件-传值"><a href="#自定义组件-传值" class="header-anchor">#</a> 自定义组件-传值</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token number">1</span>	新建components文件夹
<span class="token number">2</span>	在components文件夹下面创建一个组件<span class="token string">&quot;Tabs&quot;</span>文件夹，然后点击右键创建component

<span class="token number">3</span>	<span class="token punctuation">.</span>json里注册组件<span class="token operator">:</span>
<span class="token punctuation">{</span><span class="token string">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;Tabs&quot;</span><span class="token operator">:</span> <span class="token string">&quot;../../components/Tabs/Tabs&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token number">4</span>	<span class="token punctuation">.</span>wxml使用组件
<span class="token operator">&lt;</span>Tabs myValue<span class="token operator">=</span><span class="token string">&quot;233&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

自定义组件里设置类型和默认值
properties<span class="token operator">:</span><span class="token punctuation">{</span>
  myValue<span class="token operator">:</span><span class="token punctuation">{</span>
  type<span class="token operator">:</span>number<span class="token punctuation">,</span>
  value<span class="token operator">:</span><span class="token number">666</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span>
自定义组件里引用
<span class="token operator">&lt;</span>navigator url<span class="token operator">=</span><span class="token string">&quot;{{myValue}}&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>myValue<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="传值"><a href="#传值" class="header-anchor">#</a> 传值</h2> <h3 id="标签传值-父-子"><a href="#标签传值-父-子" class="header-anchor">#</a> 标签传值  (父==&gt;子)</h3> <div class="language- extra-class"><pre class="language-text"><code>
父组件:
引用的子组件标签 里直接写 xxx=&quot;xxx&quot;

子组件:
properties 里面接收
properties: {
  //方法一:
	xxx: { 
      type: String,
      value: '', // 属性初始值（可选）、、
   		// 属性被改变时执行的函数（可选），也可以写成在methods段中定义的方法名字符串, 如:'_propertyChange'
      observer: function(newVal, oldVal){} 
    }
   // 方法二:简化的定义方式
   myProperty2: String
}
</code></pre></div><h3 id="事件传值-子-父"><a href="#事件传值-子-父" class="header-anchor">#</a> 事件传值 (子==&gt;父)</h3> <div class="language- extra-class"><pre class="language-text"><code>
父:相当于vue的@事件，bind === @
&lt;component-tag-name bindchildFn=&quot;fatherFn&quot; /&gt;
&lt;!-- 或者可以写成 --&gt;
&lt;component-tag-name bind:childFn=&quot;fatherFn&quot; /&gt;

子:相当于vue的this.$emit()
this.triggerEvent('childFn', myEventDetail, myEventOption)

//父.js
fatherFn: function(e){
  e.detail // 自定义组件触发事件时提供的detail对象
}

</code></pre></div><h3 id="父组件调用子组件的方法"><a href="#父组件调用子组件的方法" class="header-anchor">#</a> 父组件调用子组件的方法</h3> <div class="language- extra-class"><pre><code>1、调用子组件的时候定义一个id，vue就是定义一个ref       
	&lt;header id=&quot;header&quot;&gt;&lt;/header&gt;
	
2、父组件获取子组件的实例   （类似于选择器）       
	var header = this.selectComponent(&quot;#header&quot;)

3、header.方法名	--&gt;	调用子组件里面的方法                 
	header.data.msg父组件里面直接获取子组件的数据
</code></pre></div><h4 id="路由路径传值-xxx-xxx"><a href="#路由路径传值-xxx-xxx" class="header-anchor">#</a> 路由路径传值: /?xxx=xxx</h4> <div class="language- extra-class"><pre class="language-text"><code>
在目的页面.js 
onLoad: function (options) { console.log(options) }, 
</code></pre></div><h4 id="data-传值"><a href="#data-传值" class="header-anchor">#</a> data-传值</h4> <div class="language- extra-class"><pre class="language-text"><code>&lt;:xxx=&quot;xxx&quot;&gt;
获取
e.currentTarget.dataset.xxx
</code></pre></div><h3 id="传值总结"><a href="#传值总结" class="header-anchor">#</a> 传值总结</h3> <p>bind+事件名(平头写法)=&quot;事件名(驼峰)&quot;<br>
bind传值可 <code>e.detail</code> 获取</p> <div class="language- extra-class"><pre class="language-text"><code>
#使用组件传值
例子:传index
//父给子传一个tabs数据 
&lt;Tabs tabs=&quot;{{tabs}}&quot;&gt;
//父.js: tabs: [],
  
//子.js: 通过this.triggerEvent调用父方法,把index交给他
this.triggerEvent('tabsItemChange', { index })

//父.js : 父通通过bind:上面那个方法,通过e.detail接收
&lt;Tabs tabs=&quot;{{tabs}}&quot; bind:tabsItemChange=&quot;onTabsItemChange&quot;&gt;
onTabsItemChange(e) { const { index } = e.detail }
</code></pre></div><h2 id="与vue区别"><a href="#与vue区别" class="header-anchor">#</a> 与vue区别</h2> <h3 id="设置data"><a href="#设置data" class="header-anchor">#</a> 设置data</h3> <p>vue 直接 this.xxx = 就行</p> <p>小程序通过 this.setData({    })设置</p> <p>--可能因为--vue是data(){return{xxx}}的方式设置参数, 小程序是data:{ xxx : xxx}设置的</p> <p>但小程序函数里使用data数据是通过this.data.xxx调用</p> <h3 id="点击事件-2"><a href="#点击事件-2" class="header-anchor">#</a> 点击事件</h3> <table><thead><tr><th></th> <th>小程序</th> <th>vue</th></tr></thead> <tbody><tr><td>点击事件</td> <td>bindtap=&quot;fun&quot;</td> <td>@click=&quot;fun(a, b)&quot;</td></tr> <tr><td>改变事件</td> <td>bindchange='fun'</td> <td>@change = 'fun'</td></tr></tbody></table> <p>小程序不支持传参, 传参得在后面写data-自定义名字=&quot;&quot;</p> <p>函数里面通过 e.currentTarget.dataset 获取</p> <h2 id="一些坑"><a href="#一些坑" class="header-anchor">#</a> 一些坑</h2> <h3 id="scroll-y滚动失效"><a href="#scroll-y滚动失效" class="header-anchor">#</a> scroll-y滚动失效</h3> <p>page 设为 height:100%</p> <h2 id="支持es7-async"><a href="#支持es7-async" class="header-anchor">#</a> 支持ES7 async</h2> <p>https://github.com/facebook/regenerator/blob/master/packages/regenerator-runtime/runtime.js</p> <p>将代码复制到  新建 lib/runtime/runtime.js    最后加上, 有的话不用加</p> <p><code>module.exports = runtime;</code></p> <p>再在需要引入的页面.js 引入(不能全局引入)</p> <div class="language- extra-class"><pre class="language-text"><code>
import regeneratorRuntime from &quot;../../lib/runtime/runtime&quot;;
</code></pre></div><h2 id="封装wx-request"><a href="#封装wx-request" class="header-anchor">#</a> 封装wx.request</h2> <div class="language- extra-class"><pre class="language-text"><code>//例子
export const request = params =&gt; {
    wx.showLoading({
        title: '加载中'
    })
    const baseURl = &quot;https://api.zbztb.cn/api/public/v1/&quot;
    return new Promise((reslove, reject) =&gt; {
        wx.request({
            ...params,
            url: baseURl + params.url,
            success: res =&gt; {reslove(res)},
            fail: err =&gt; {reject(err)},
            complete: () =&gt; {wx.hideLoading()}
        })
    })
}
</code></pre></div><h2 id="常用事件"><a href="#常用事件" class="header-anchor">#</a> 常用事件</h2> <div class="language- extra-class"><pre class="language-text"><code>触底事件:	
onReachBottom: function () {}
下拉刷新: 页面.json
&quot;enablePullDownRefresh&quot;: true,
&quot;backgroundTextStyle&quot;: &quot;dark&quot;
js里面--
onPullDownRefresh:function(){ }
关闭下拉刷新窗口----
wx.stopPullDownRefresh();
</code></pre></div><h2 id="购物车相关代码"><a href="#购物车相关代码" class="header-anchor">#</a> 购物车相关代码</h2> <h3 id="加入购物车"><a href="#加入购物车" class="header-anchor">#</a> 加入购物车</h3> <div class="language- extra-class"><pre class="language-text"><code>wx.getStorageSync		
wx.setStorageSync
// 1 读取缓存 --数组
let cart = wx.getStorageSync('cart') || [];
// 2 查找索引,收否有该id商品
let index = cart.findIndex(v =&gt; v.goods_id === this.data.goodsObj.goods_id)
    if (index === -1) { // 如果不存在索引
      this.data.goodsObj.num = 1 // 则创建num属性
      cart.push({ // 更新cart数组
        goods_id: this.data.goodsObj.goods_id,
        num: this.data.goodsObj.num
      })
    } else { // 存在
      cart[index].num++
    }
    wx.setStorageSync('cart', cart) // 写入缓存
</code></pre></div><h3 id="结算判断"><a href="#结算判断" class="header-anchor">#</a> 结算判断</h3> <h3 id="获取购物车数据-遍历判断-根据check是否选中"><a href="#获取购物车数据-遍历判断-根据check是否选中" class="header-anchor">#</a> 获取购物车数据, 遍历判断, 根据check是否选中</h3> <div class="language- extra-class"><pre class="language-text"><code>// 监听页面显示
  onShow: function () {
    // 获取地址
    let address = wx.getStorageSync('address')
    this.setData({ address })
    // 更新购物车
    let cart = wx.getStorageSync('cart') || []
    // 调用
    this.setCart(cart)
  },
</code></pre></div><h3 id="封装方法-设置购物车状态-总数-总价-勾选"><a href="#封装方法-设置购物车状态-总数-总价-勾选" class="header-anchor">#</a> 封装方法:   设置购物车状态: 总数 总价 勾选</h3> <div class="language- extra-class"><pre class="language-text"><code>// 设置购物车状态: 总数 总价 勾选
  setCart(cart) {
    // 选中,总价,总数
    let allCheck = true, totalPrice = 0, totalNum = 0
    //cart是遍历的数据数组,cart.check有值,true或者false
    //every返回布尔值,空数组.every返回true
    // const allCheck = cart.length === 0 ? false : cart.every(v =&gt; v.check)
    // 遍历
    cart.forEach(v =&gt; {
      if (v.check) {
        totalPrice += v.num * v.goods_price
        totalNum += v.num
      } else { allCheck = false }
    })
    // 优化bug
    allCheck = cart.length != 0 ? allCheck : false;
    // 提交数据
    this.setData({ cart, allCheck, totalPrice, totalNum })
  }
</code></pre></div><h3 id="全选框状态控制"><a href="#全选框状态控制" class="header-anchor">#</a> 全选框状态控制</h3> <div class="language- extra-class"><pre class="language-text"><code>//cart是遍历的数据数组,cart.check有值,true或者false
//every返回布尔值,空数组.every返回true
const allCheck = cart.length === 0 ? false : cart.every(v =&gt; v.check)
</code></pre></div><h2 id="sdk插件"><a href="#sdk插件" class="header-anchor">#</a> SDK插件</h2> <p>获取用户信息 openid</p> <div class="language- extra-class"><pre class="language-text"><code>npm install -S wafer2-client-sdk
安装之后，就可以使用 require 引用 SDK 模块:
var qcloud = require('./node_modules/wafer2-client-sdk/index.js');
</code></pre></div><p>文档https://github.com/tencentyun/wafer2-client-sdk</p> <h2 id="wx-navigate"><a href="#wx-navigate" class="header-anchor">#</a> wx.navigate</h2> <table><thead><tr><th>open-type的值</th> <th></th> <th></th></tr></thead> <tbody><tr><td>navigateTo</td> <td>不能跳tabbar底部导航</td> <td>保留原页面</td></tr> <tr><td>redirect</td> <td>新建跳转，不能tabbar</td> <td>不保留原页面</td></tr> <tr><td>switchTab</td> <td>可跳转到tabBar页面</td> <td>关闭所有页面，不能携带参数</td></tr> <tr><td>reLaunch</td> <td>可跳转到tabBar页面</td> <td>关闭所有页面，能携带参数</td></tr></tbody></table> <h2 id="项目问题"><a href="#项目问题" class="header-anchor">#</a> 项目问题</h2> <h3 id="小程序使用vant"><a href="#小程序使用vant" class="header-anchor">#</a> 小程序使用vant</h3> <div class="language- extra-class"><pre class="language-text"><code>npm init -y
npm i @vant/weapp -S --production
</code></pre></div><p>接下来:https://youzan.github.io/vant-weapp/#/quickstart</p> <h3 id="setdata异步问题"><a href="#setdata异步问题" class="header-anchor">#</a> setData异步问题</h3> <p>数据放page外，也就是全局里吧，没其他好的解决办法</p> <p>可能是this的原因，打印看看是不是小程序的this</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/29/2022, 7:51:07 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webnote/框架/vue.html" class="prev">
        vue
      </a></span> <span class="next"><a href="/webnote/框架/框架对比.html">
        React Vue 小程序对比
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7e40d91d.js" defer></script><script src="/assets/js/2.74dbbd17.js" defer></script><script src="/assets/js/34.1bf13c14.js" defer></script>
  </body>
</html>
